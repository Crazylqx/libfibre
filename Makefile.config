ifeq ($(CC),clang)
CXX=clang++
else
TLSFLAGS=-fno-extern-tls-init -mtls-dialect=gnu2
endif

DBGFLAGS=-ggdb # -fsanitize=address
OPTFLAGS=-O3 -fno-omit-frame-pointer
CFGFLAGS=-pthread
COMPFLAGS=-fPIC -Wall -Wextra -Wno-unused-function -Wno-unused-parameter
CPPFLAGS=-std=c++11

CXXFLAGS=$(DBGFLAGS) $(OPTFLAGS) $(CFGFLAGS) $(COMPFLAGS) $(TLSFLAGS) $(CPPFLAGS)
CFAFLAGS=$(DBGFLAGS) $(OPTFLAGS) $(CFGFLAGS) $(COMPFLAGS) $(TLSFLAGS)

DYNSTACK=0
ifeq ($(DYNSTACK),1)
CXXFLAGS+=-fsplit-stack -DSPLIT_STACK
else
#CXXFLAGS+=-Wstack-usage=2048
endif
